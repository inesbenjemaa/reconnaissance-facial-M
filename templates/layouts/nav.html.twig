<nav class="navbar navbar-expand-lg" style="background-color:rgb(85, 165, 121); box-shadow: 0px 4px 6px rgba(193, 188, 188, 0.1);">
  <div class="container">
    <!-- Logo et titre de la marque -->
    <a class="navbar-brand" style="font-weight: bold; font-size: 24px; color:rgb(46, 90, 42);">PlatForme</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <div class="collapse navbar-collapse" id="navbarScroll">
      <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
        <!-- Lien vers la page d'accueil -->
        <li class="nav-item">
          <a class="nav-link active font-weight-bold" aria-current="page" href="{{ path('app_home') }}" style="color: #FAF5E9;">Home</a>
        </li>
        
        <!-- Menu des catégories -->
        {% if categories is defined %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle font-weight-bold" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #FAF5E9;">
            Categories
          </a>
          <ul class="dropdown-menu" style="background-color: #FAF5E9;">
            {% for category in categories %}
              <li><a class="dropdown-item font-weight-bold" href="#" style="color:rgb(0, 0, 0);">{{ category.name }}</a></li>
              {% for ssubCategories in category.ssubCategories %}
                <li><a class="dropdown-item" href="{{ path('app_home_product_filter', {'id': ssubCategories.id }) }}" style="color: #009B4D;">{{ ssubCategories.name }}</a></li>
              {% endfor %}
              <li><hr class="dropdown-divider"></li>
            {% endfor %}
          </ul>
        </li>
        {% endif %}

        <!-- Menu d'administration (visible seulement pour les admins) -->
        {% if is_granted('ROLE_ADMIN') %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle font-weight-bold" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #FAF5E9;">
            Administration
          </a>
          <ul class="dropdown-menu" style="background-color: #FAF5E9;">
            <li><hr class="dropdown-divider"></li> 
            <li><a class="dropdown-item" href="{{ path('app_user') }}" style="color: #009B4D;">Users</a></li>
            <li><a class="dropdown-item" href="{{ path('app_authorization') }}" style="color: #009B4D;">Access</a></li>
          </ul>
        </li>
        {% endif %}

        <!-- Liens si utilisateur non connecté -->
        {% if app.user == false %}
        <li class="nav-item">
          <a href="{{ path('app_register') }}" class="nav-link font-weight-bold" style="color:rgb(255, 255, 255);">Register</a>
        </li>
        <li class="nav-item">
          <a href="{{ path('app_login') }}" class="nav-link font-weight-bold" style="color:rgb(255, 255, 255);">Connexion</a>
        </li>
        {% endif %}
      </ul>

      <!-- Bouton Logout si utilisateur connecté -->
      {% if app.user %}
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a href="{{ path('app_logout') }}" class="nav-link font-weight-bold" style="color:rgb(255, 255, 255);"
             onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
            Logout
          </a>
          <form id="logout-form" action="{{ path('app_logout') }}" method="post" style="display: none;"></form>
        </li>
      </ul>
      {% endif %}
    </div>
  </div>
</nav>
